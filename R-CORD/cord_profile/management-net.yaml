


tosca_definitions_version: tosca_simple_yaml_1_0

imports:
   - custom_types/networktemplate.yaml
   - custom_types/network.yaml
   - custom_types/slice.yaml
   - custom_types/site.yaml

description: management network config, generated by rcord profile

topology_template:
  node_templates:

# site, fully created in deployment.yaml
    mysite:
      type: tosca.nodes.Site
      properties:
        name: mysite

# management (vtn: MANAGEMENT_LOCAL) network
    management_template:
      type: tosca.nodes.NetworkTemplate
      properties:
        name: management_template
        visibility: private
        translation: none
        vtn_kind: MANAGEMENT_LOCAL

    management:
      type: tosca.nodes.Network
      properties:
        name: management
        # ip_version: 4
        subnet: 172.27.0.0/24
        permit_all_slices: true
      requirements:
        - template:
            node: management_template
            relationship: tosca.relationships.BelongsToOne
        - owner:
            node: slice#mysite_management
            relationship: tosca.relationships.BelongsToOne


# Slice to own management networks
    slice#mysite_management:
      description: This slice exists solely to own the management network(s)
      type: tosca.nodes.Slice
      properties:
        network: noauto
        name: mysite_management
      requirements:
        - site:
            node: mysite
            relationship: tosca.relationships.BelongsToOne

