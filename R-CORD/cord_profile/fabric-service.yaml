


tosca_definitions_version: tosca_simple_yaml_1_0

imports:
   - custom_types/onosservice.yaml
   - custom_types/serviceattribute.yaml
   - custom_types/fabricservice.yaml
   - custom_types/onosapp.yaml
   - custom_types/serviceinstancelink.yaml

description: fabric services, generated by rcord profile

topology_template:
  node_templates:

    service#ONOS_Fabric:
      type: tosca.nodes.ONOSService
      properties:
          name: ONOS_Fabric
          kind: platform
          no_container: true
          rest_hostname: onos-fabric.cord.lab

    serviceattribute#fabric_network_cfg_json:
      type: tosca.nodes.ServiceAttribute
      requirements:
          - service:
              node: service#ONOS_Fabric
              relationship: tosca.relationships.BelongsToOne
      properties:
          name: rest_onos/v1/network/configuration/
          value: '{}'

    service#fabric:
      type: tosca.nodes.FabricService
      properties:
          name: fabric
          kind: platform



    Fabric_ONOS_app:
      type: tosca.nodes.ONOSApp
      requirements:
          - owner:
              node: service#ONOS_Fabric
              relationship: tosca.relationships.BelongsToOne
      properties:
          name: Fabric_ONOS_app
          dependencies: org.onosproject.drivers, org.onosproject.openflow, org.onosproject.netcfghostprovider, org.onosproject.segmentrouting

    Fabric_ONOS_app_ONOS_Fabric:
        type: tosca.nodes.ServiceInstanceLink
        requirements:
          - provider_service_instance:
              node: Fabric_ONOS_app
              relationship: tosca.relationships.BelongsToOne
          - subscriber_service:
              node: service#fabric
              relationship: tosca.relationships.BelongsToOne

